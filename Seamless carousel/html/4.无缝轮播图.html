<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			body {
				margin: 0;
			}
			ul {
				margin: 0;
				padding: 0;
				list-style: none
			}
			#wrap {
				width: 240px;
				margin: 40px auto;
			}
			nav {
				text-align: center;
				margin: 10px 0;
			}
			#imgs {
				position: relative;
				height: 135px;
				overflow: hidden;
			}
			#list {
				position: absolute;
				left: 0;
				top: 0;
				width: 200%;
			}
			#list li {
				float: left;
			}
			.active {
				background: #666;
				color: #FFFFFF;
			}
		</style>
		<script src="../js/aTween.js"></script>
		<script>
		/* 在前面添加最后一张，在后面添加第一张 */
			window.onload = function() {
				var navs = document.querySelectorAll('nav');
				var btns = navs[0].children;
				var btns1 = navs[1].children;
				var list = document.querySelector('#list');
				var lis = list.children;
				var imgs = list.querySelectorAll('img');
				var firstNode = lis[lis.length-1].cloneNode(true);
				var lastNode = lis[0].cloneNode(true);
				var imgW = css(imgs[0],"width");
				var now = 0;
				list.insertBefore(firstNode,lis[0]);
				list.appendChild(lastNode);
				list.style.width = lis.length + "00%";
				css(list,"left",-imgW*(now+1));
				for(var i= 0; i < btns1.length; i++) {
					if(btns1[i].className == "active") {
						now = i;
					}
					btns1[i].index = i;
					btns1[i].onmouseover = function() {
						btns1[now].className = "";
						now = this.index;
						this.className = "active";
						mTween(list,{left:-imgW*(now+1)},500,"easeBoth");
					};
				}
				btns[1].onclick = function() {
					if(now >= btns1.length) {
						now = 0;
						css(list,"left",-(now+1)*imgW);
					}
					btns1[now%btns1.length].className = ""; // now 是1-5，因为第一张前面还有一个最后一张，btn是0-4，所以要%length
					now++;
					btns1[now%btns1.length].className = 'active';
					mTween(list,{left:-imgW*(now+1)},500,"easeOut");
				};
				btns[0].onclick = function() {
					if(now < 0) {
						now = btns1.length-1;
						css(list,"left",-(now+1)*imgW);
					}
					btns1[now%btns1.length].className = "";
					now--;
					btns1[now%btns1.length].className = 'active';
					mTween(list,{left:-imgW*(now+1)},500,"easeOut");
				};
			};
		</script>
	</head>
	<body>
		<div id="wrap">
			<nav>
				<input type="button" value="上一张"/>
				<input type="button" value="下一张"/>
			</nav>
			<div id="imgs">
				<ul id="list">
					<li><img src="../img/1.jpg"/></li>
					<li><img src="../img/2.png"/></li>
					<li><img src="../img/3.jpg"/></li>
					<li><img src="../img/4.jpg"/></li>
					<li><img src="../img/5.png"/></li>
				</ul>
			</div>
			<nav>
				<input type="button" value="1" class="active"/>
				<input type="button" value="2"/>
				<input type="button" value="3"/>
				<input type="button" value="4"/>
				<input type="button" value="5"/>
			</nav>
		</div>
	</body>
</html>
